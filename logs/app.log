2025-05-23 20:10:09 - INFO - uvicorn.error - config.py:318 - Will watch for changes in these directories: ['D:\\projects\\Library Management Project\\server']
2025-05-23 20:10:09 - INFO - uvicorn.error - config.py:524 - Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
2025-05-23 20:10:09 - INFO - uvicorn.error - basereload.py:80 - Started reloader process [6000] using WatchFiles
2025-05-23 20:10:13 - INFO - uvicorn.error - server.py:83 - Started server process [13968]
2025-05-23 20:10:13 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:10:13 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:10:41 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:10:41 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\nonadmin_user_service.py'. Reloading...
2025-05-23 20:10:41 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:10:41 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:10:43 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:10:45 - INFO - uvicorn.error - server.py:93 - Finished server process [13968]
2025-05-23 20:10:55 - INFO - uvicorn.error - server.py:83 - Started server process [9212]
2025-05-23 20:10:55 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:10:55 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:13:26 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:13:26 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\nonadmin_user_service.py'. Reloading...
2025-05-23 20:13:26 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:13:27 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:13:27 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:13:27 - INFO - uvicorn.error - server.py:93 - Finished server process [9212]
2025-05-23 20:13:31 - INFO - uvicorn.error - server.py:83 - Started server process [7356]
2025-05-23 20:13:31 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:13:31 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:13:33 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:13:33 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\nonadmin_user_service.py'. Reloading...
2025-05-23 20:13:33 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:13:33 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:13:33 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:13:33 - INFO - uvicorn.error - server.py:93 - Finished server process [7356]
2025-05-23 20:13:39 - INFO - uvicorn.error - server.py:83 - Started server process [15384]
2025-05-23 20:13:39 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:13:39 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:13:50 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:13:50 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\nonadmin_user_service.py'. Reloading...
2025-05-23 20:13:50 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:13:50 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:13:50 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:13:50 - INFO - uvicorn.error - server.py:93 - Finished server process [15384]
2025-05-23 20:13:58 - INFO - uvicorn.error - server.py:83 - Started server process [17908]
2025-05-23 20:13:58 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:13:58 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:15:42 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:15:42 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\nonadmin_user_service.py'. Reloading...
2025-05-23 20:15:42 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:15:42 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:15:42 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:15:42 - INFO - uvicorn.error - server.py:93 - Finished server process [17908]
2025-05-23 20:15:48 - INFO - uvicorn.error - server.py:83 - Started server process [2476]
2025-05-23 20:15:48 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:15:48 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:17:57 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:17:57 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 20:17:57 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:17:57 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:17:57 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:17:57 - INFO - uvicorn.error - server.py:93 - Finished server process [2476]
2025-05-23 20:18:00 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:18:02 - INFO - uvicorn.error - server.py:83 - Started server process [17900]
2025-05-23 20:18:02 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:18:02 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:18:21 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:18:21 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 20:18:21 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:18:22 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:18:22 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:18:22 - INFO - uvicorn.error - server.py:93 - Finished server process [17900]
2025-05-23 20:18:25 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:18:26 - INFO - uvicorn.error - server.py:83 - Started server process [18524]
2025-05-23 20:18:26 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:18:26 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:18:44 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:18:44 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\nonadmin_user_service.py'. Reloading...
2025-05-23 20:18:44 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:18:44 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:18:44 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:18:44 - INFO - uvicorn.error - server.py:93 - Finished server process [18524]
2025-05-23 20:18:49 - INFO - uvicorn.error - server.py:83 - Started server process [7912]
2025-05-23 20:18:49 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:18:49 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:18:51 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:18:51 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 20:18:51 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:18:51 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:18:51 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:18:51 - INFO - uvicorn.error - server.py:93 - Finished server process [7912]
2025-05-23 20:19:03 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:19:03 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 20:19:05 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:19:07 - INFO - uvicorn.error - server.py:83 - Started server process [20492]
2025-05-23 20:19:07 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:19:07 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:24:58 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:24:58 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 20:24:58 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:24:58 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:24:58 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:24:58 - INFO - uvicorn.error - server.py:93 - Finished server process [20492]
2025-05-23 20:25:02 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:25:03 - INFO - uvicorn.error - server.py:83 - Started server process [18420]
2025-05-23 20:25:03 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:25:03 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:25:17 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:25:17 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 20:25:17 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:25:18 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:25:18 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:25:18 - INFO - uvicorn.error - server.py:93 - Finished server process [18420]
2025-05-23 20:25:22 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:25:23 - INFO - uvicorn.error - server.py:83 - Started server process [9992]
2025-05-23 20:25:23 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:25:23 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:25:46 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:25:46 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 20:25:46 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:25:46 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:25:46 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:25:46 - INFO - uvicorn.error - server.py:93 - Finished server process [9992]
2025-05-23 20:25:49 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:25:50 - INFO - uvicorn.error - server.py:83 - Started server process [9596]
2025-05-23 20:25:50 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:25:50 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:26:27 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:26:27 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 20:26:27 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:26:27 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:26:27 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:26:28 - INFO - uvicorn.error - server.py:93 - Finished server process [9596]
2025-05-23 20:26:34 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:26:35 - INFO - uvicorn.error - server.py:83 - Started server process [3812]
2025-05-23 20:26:35 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:26:35 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:30:08 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:30:08 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 20:30:08 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:30:08 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:30:08 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:30:08 - INFO - uvicorn.error - server.py:93 - Finished server process [3812]
2025-05-23 20:30:13 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:30:14 - INFO - uvicorn.error - server.py:83 - Started server process [2692]
2025-05-23 20:30:14 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:30:14 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:30:26 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:30:26 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\nonadmin_user_service.py'. Reloading...
2025-05-23 20:30:26 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:30:26 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:30:26 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:30:26 - INFO - uvicorn.error - server.py:93 - Finished server process [2692]
2025-05-23 20:30:30 - INFO - uvicorn.error - server.py:83 - Started server process [6612]
2025-05-23 20:30:30 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:30:30 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:30:33 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:30:33 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\nonadmin_user_service.py'. Reloading...
2025-05-23 20:30:33 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:30:33 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:30:33 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:30:33 - INFO - uvicorn.error - server.py:93 - Finished server process [6612]
2025-05-23 20:30:39 - INFO - uvicorn.error - server.py:83 - Started server process [21368]
2025-05-23 20:30:39 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:30:39 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:31:32 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:31:32 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 20:31:33 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:31:33 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:31:33 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:31:33 - INFO - uvicorn.error - server.py:93 - Finished server process [21368]
2025-05-23 20:31:44 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:31:47 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:31:47 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 20:32:01 - INFO - uvicorn.error - server.py:83 - Started server process [1068]
2025-05-23 20:32:01 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:32:01 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:32:01 - ERROR - uvicorn.error - on.py:134 - Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 664, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 699, in lifespan
    await receive()
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-05-23 20:32:03 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:32:03 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 20:32:06 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:32:06 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 20:32:15 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:32:15 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 20:32:30 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:32:35 - INFO - uvicorn.error - server.py:83 - Started server process [15076]
2025-05-23 20:32:35 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:32:35 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:32:38 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:32:38 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 20:32:41 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:32:42 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:32:42 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:32:42 - INFO - uvicorn.error - server.py:93 - Finished server process [15076]
2025-05-23 20:32:54 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:33:01 - INFO - uvicorn.error - server.py:83 - Started server process [13800]
2025-05-23 20:33:01 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:33:02 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:35:41 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:35:41 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 20:35:41 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:35:41 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:35:41 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:35:41 - INFO - uvicorn.error - server.py:93 - Finished server process [13800]
2025-05-23 20:35:52 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:35:56 - INFO - uvicorn.error - server.py:83 - Started server process [14700]
2025-05-23 20:35:56 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:35:56 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:36:51 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:36:51 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\nonadmin_user_service.py'. Reloading...
2025-05-23 20:36:51 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:36:51 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:36:51 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:36:51 - INFO - uvicorn.error - server.py:93 - Finished server process [14700]
2025-05-23 20:37:12 - INFO - uvicorn.error - server.py:83 - Started server process [16252]
2025-05-23 20:37:12 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:37:12 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:37:17 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:37:18 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\nonadmin_user_service.py'. Reloading...
2025-05-23 20:37:19 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:37:21 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:37:22 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:37:24 - INFO - uvicorn.error - server.py:93 - Finished server process [16252]
2025-05-23 20:37:28 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:37:28 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\nonadmin_user_service.py'. Reloading...
2025-05-23 20:37:46 - INFO - uvicorn.error - server.py:83 - Started server process [19428]
2025-05-23 20:37:46 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:37:46 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:37:54 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:37:54 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\nonadmin_user_service.py'. Reloading...
2025-05-23 20:37:54 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:37:54 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:37:54 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:37:54 - INFO - uvicorn.error - server.py:93 - Finished server process [19428]
2025-05-23 20:38:05 - INFO - uvicorn.error - server.py:83 - Started server process [1256]
2025-05-23 20:38:05 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:38:05 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:39:33 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:39:33 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 20:39:33 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:39:33 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:39:33 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:39:33 - INFO - uvicorn.error - server.py:93 - Finished server process [1256]
2025-05-23 20:39:52 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:40:00 - INFO - uvicorn.error - server.py:83 - Started server process [21304]
2025-05-23 20:40:00 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:40:00 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:40:29 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:40:29 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 20:40:29 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:40:29 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:40:29 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:40:29 - INFO - uvicorn.error - server.py:93 - Finished server process [21304]
2025-05-23 20:40:33 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:40:34 - INFO - uvicorn.error - server.py:83 - Started server process [11024]
2025-05-23 20:40:34 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:40:34 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:40:38 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:40:38 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 20:40:38 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:40:39 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:40:40 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:40:44 - INFO - uvicorn.error - server.py:93 - Finished server process [11024]
2025-05-23 20:41:12 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:41:12 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 20:41:47 - INFO - uvicorn.error - server.py:83 - Started server process [1644]
2025-05-23 20:41:47 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:41:47 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:41:47 - ERROR - uvicorn.error - on.py:134 - Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 664, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 699, in lifespan
    await receive()
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-05-23 20:41:49 - INFO - watchfiles.main - main.py:308 - 6 changes detected
2025-05-23 20:41:49 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 20:42:33 - INFO - uvicorn.error - server.py:83 - Started server process [9336]
2025-05-23 20:42:34 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:42:34 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:45:06 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:45:06 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 20:45:06 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:45:07 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:45:07 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:45:08 - INFO - uvicorn.error - server.py:93 - Finished server process [9336]
2025-05-23 20:45:14 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:45:14 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 20:45:27 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:45:30 - INFO - uvicorn.error - server.py:83 - Started server process [2320]
2025-05-23 20:45:30 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:45:30 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:45:51 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:45:51 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\dependencies\auditlog_dep.py'. Reloading...
2025-05-23 20:45:51 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:45:51 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:45:51 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:45:51 - INFO - uvicorn.error - server.py:93 - Finished server process [2320]
2025-05-23 20:46:07 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:46:07 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\nonadmin_user_service.py'. Reloading...
2025-05-23 20:46:20 - INFO - uvicorn.error - server.py:83 - Started server process [3324]
2025-05-23 20:46:20 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:46:20 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:46:20 - ERROR - uvicorn.error - on.py:134 - Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 664, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 699, in lifespan
    await receive()
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-05-23 20:46:22 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:46:40 - INFO - uvicorn.error - server.py:83 - Started server process [1452]
2025-05-23 20:46:40 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:46:40 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:47:15 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:47:15 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\google_auth_service.py'. Reloading...
2025-05-23 20:47:15 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:47:15 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:47:15 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:47:15 - INFO - uvicorn.error - server.py:93 - Finished server process [1452]
2025-05-23 20:47:33 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:47:33 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\facebook_auth_service.py'. Reloading...
2025-05-23 20:47:40 - INFO - uvicorn.error - server.py:83 - Started server process [12284]
2025-05-23 20:47:40 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:47:40 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:47:40 - ERROR - uvicorn.error - on.py:134 - Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 664, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 699, in lifespan
    await receive()
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-05-23 20:47:41 - INFO - watchfiles.main - main.py:308 - 9 changes detected
2025-05-23 20:47:49 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:47:49 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\facebook_auth_service.py'. Reloading...
2025-05-23 20:47:57 - INFO - uvicorn.error - server.py:83 - Started server process [9472]
2025-05-23 20:47:57 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:47:57 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:47:57 - ERROR - uvicorn.error - on.py:134 - Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 664, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 699, in lifespan
    await receive()
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-05-23 20:47:59 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:48:10 - INFO - uvicorn.error - server.py:83 - Started server process [21260]
2025-05-23 20:48:10 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:48:10 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:48:38 - WARNING - LibraryAppLogger - token.py:31 - Authorization header missing or incorrectly formatted
2025-05-23 20:48:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 20:48:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 20:48:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 20:48:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 20:48:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 20:48:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 20:48:39 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 20:48:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 20:48:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.11873s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 20:48:40 - WARNING - passlib.handlers.bcrypt - bcrypt.py:622 - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-05-23 20:48:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - INSERT INTO users (fullname, email, password, is_admin, is_active, profile_image, auth_provider, provider_id, last_login) VALUES (%(fullname)s, %(email)s, %(password)s, %(is_admin)s, %(is_active)s, %(profile_image)s, %(auth_provider)s, %(provider_id)s, %(last_login)s) RETURNING users.id, users.created_at, users.updated_at
2025-05-23 20:48:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00772s] {'fullname': 'ammar', 'email': 'ammar@gmail.com', 'password': '$2b$12$e.NpNIZpMRUHoQMJj2y8XOubEZs9MXRE9AF1fUb0pszr8ABr9jMZ2', 'is_admin': True, 'is_active': True, 'profile_image': None, 'auth_provider': 'LOCAL', 'provider_id': None, 'last_login': None}
2025-05-23 20:48:42 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 20:48:42 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 20:48:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id, users.fullname, users.email, users.password, users.is_admin, users.is_active, users.profile_image, users.auth_provider, users.provider_id, users.last_login, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 20:48:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.01737s] {'pk_1': 6}
2025-05-23 20:48:42 - INFO - LibraryAppLogger - auth_service.py:43 - Admin 'ammar@gmail.com' registered successfully with ID 6
2025-05-23 20:48:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 20:48:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.01719s] {'param_1': 6}
2025-05-23 20:48:42 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 20:49:13 - WARNING - LibraryAppLogger - token.py:31 - Authorization header missing or incorrectly formatted
2025-05-23 20:49:13 - ERROR - LibraryAppLogger - auth_service.py:89 - Unexpected error during admin login: type object 'UserRepo' has no attribute 'get_admin_user_by_email'
2025-05-23 20:49:13 - ERROR - LibraryAppLogger - auth_service.py:90 - Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\app\services\admin\auth_service.py", line 60, in login_admin
    found_user = authenticate_admin_user(db=db,email=user.email,password=user.password)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\projects\Library Management Project\server\app\services\admin\auth_service.py", line 19, in authenticate_admin_user
    admin = UserRepo.get_admin_user_by_email(db=db, email=email)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
AttributeError: type object 'UserRepo' has no attribute 'get_admin_user_by_email'. Did you mean: 'get_user_by_email'?

2025-05-23 20:49:38 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:49:38 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\auth_service.py'. Reloading...
2025-05-23 20:49:38 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:49:39 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:49:39 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:49:39 - INFO - uvicorn.error - server.py:93 - Finished server process [21260]
2025-05-23 20:49:48 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:49:52 - INFO - uvicorn.error - server.py:83 - Started server process [15948]
2025-05-23 20:49:52 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:49:52 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:50:12 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 20:50:12 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\auth_service.py'. Reloading...
2025-05-23 20:50:12 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 20:50:12 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 20:50:13 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 20:50:13 - INFO - uvicorn.error - server.py:93 - Finished server process [15948]
2025-05-23 20:50:23 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 20:50:36 - INFO - uvicorn.error - server.py:83 - Started server process [12424]
2025-05-23 20:50:36 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 20:50:36 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 20:50:36 - WARNING - LibraryAppLogger - token.py:31 - Authorization header missing or incorrectly formatted
2025-05-23 20:50:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 20:50:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 20:50:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 20:50:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 20:50:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 20:50:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 20:50:37 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 20:50:38 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s AND users.is_admin = true 
 LIMIT %(param_1)s
2025-05-23 20:50:38 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.08758s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 20:50:38 - WARNING - passlib.handlers.bcrypt - bcrypt.py:622 - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-05-23 20:50:40 - INFO - LibraryAppLogger - auth_service.py:26 - Admin 'ammar@gmail.com' authenticated successfully
2025-05-23 20:50:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 20:50:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.07751s] {'param_1': 6}
2025-05-23 20:50:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - UPDATE users SET last_login=%(last_login)s, updated_at=now() WHERE users.id = %(users_id)s
2025-05-23 20:50:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00860s] {'last_login': datetime.datetime(2025, 5, 23, 15, 20, 40, 420435), 'users_id': 6}
2025-05-23 20:50:40 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 20:50:40 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 20:50:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id, users.fullname, users.email, users.password, users.is_admin, users.is_active, users.profile_image, users.auth_provider, users.provider_id, users.last_login, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 20:50:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.07613s] {'pk_1': 6}
2025-05-23 20:50:40 - INFO - LibraryAppLogger - token.py:20 - Token generated for user: ammar@gmail.com
2025-05-23 20:50:40 - INFO - LibraryAppLogger - auth_service.py:83 - User 'ammar@gmail.com' logged in successfully
2025-05-23 20:50:40 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 20:56:55 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 20:56:55 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 20:56:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 20:56:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.02182s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 20:56:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 20:56:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 375.1s ago] {'param_1': 6}
2025-05-23 20:56:55 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: []
2025-05-23 20:56:55 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 20:56:55 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 20:57:04 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 20:57:04 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 20:57:04 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 20:57:04 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 9.24s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 20:57:04 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 20:57:04 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 384.3s ago] {'param_1': 6}
2025-05-23 20:57:04 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: []
2025-05-23 20:57:04 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 20:57:04 - WARNING - LibraryAppLogger - auth_dep.py:124 - Admin 'ammar@gmail.com' denied access due to missing roles
2025-05-23 20:57:04 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 20:57:42 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 20:57:42 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 20:57:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 20:57:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 47.72s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 20:57:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 20:57:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 422.8s ago] {'param_1': 6}
2025-05-23 20:57:43 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: []
2025-05-23 20:57:43 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 20:57:43 - WARNING - LibraryAppLogger - auth_dep.py:124 - Admin 'ammar@gmail.com' denied access due to missing roles
2025-05-23 20:57:43 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 20:59:52 - WARNING - LibraryAppLogger - token.py:31 - Authorization header missing or incorrectly formatted
2025-05-23 20:59:52 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 20:59:52 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s AND users.is_admin = true 
 LIMIT %(param_1)s
2025-05-23 20:59:52 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 554.7s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 20:59:54 - INFO - LibraryAppLogger - auth_service.py:26 - Admin 'ammar@gmail.com' authenticated successfully
2025-05-23 20:59:54 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 20:59:54 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 554.2s ago] {'param_1': 6}
2025-05-23 20:59:54 - INFO - sqlalchemy.engine.Engine - base.py:1843 - UPDATE users SET last_login=%(last_login)s, updated_at=now() WHERE users.id = %(users_id)s
2025-05-23 20:59:54 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 553.9s ago] {'last_login': datetime.datetime(2025, 5, 23, 15, 29, 54, 497893), 'users_id': 6}
2025-05-23 20:59:54 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 20:59:54 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 20:59:54 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id, users.fullname, users.email, users.password, users.is_admin, users.is_active, users.profile_image, users.auth_provider, users.provider_id, users.last_login, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 20:59:54 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 553.9s ago] {'pk_1': 6}
2025-05-23 20:59:54 - INFO - LibraryAppLogger - token.py:20 - Token generated for user: ammar@gmail.com
2025-05-23 20:59:54 - INFO - LibraryAppLogger - auth_service.py:83 - User 'ammar@gmail.com' logged in successfully
2025-05-23 20:59:54 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:01:31 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:01:31 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:01:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:01:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 276s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:01:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:01:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 651.1s ago] {'param_1': 6}
2025-05-23 21:01:31 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:01:31 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:01:31 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:01:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:01:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 276.2s ago] {'email_1': 'user@example.com', 'param_1': 1}
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - INSERT INTO users (fullname, email, password, is_admin, is_active, profile_image, auth_provider, provider_id, last_login) VALUES (%(fullname)s, %(email)s, %(password)s, %(is_admin)s, %(is_active)s, %(profile_image)s, %(auth_provider)s, %(provider_id)s, %(last_login)s) RETURNING users.id, users.created_at, users.updated_at
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00361s] {'fullname': 'string', 'email': 'user@example.com', 'password': '$2b$12$25CYDp7U9GsWmuZD4BXz1OZr.EvaYZF83FNd7Bna4d/AeS6FANmSO', 'is_admin': True, 'is_active': True, 'profile_image': None, 'auth_provider': 'LOCAL', 'provider_id': None, 'last_login': None}
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id, users.fullname, users.email, users.password, users.is_admin, users.is_active, users.profile_image, users.auth_provider, users.provider_id, users.last_login, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 652.3s ago] {'pk_1': 7}
2025-05-23 21:01:33 - INFO - LibraryAppLogger - user_service.py:47 - Admin 'user@example.com' created successfully with ID 7
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - INSERT INTO audit_logs (action_by, target_id, target_type, description, ip_address, user_agent) VALUES (%(action_by)s, %(target_id)s, %(target_type)s, %(description)s, %(ip_address)s, %(user_agent)s) RETURNING audit_logs.id, audit_logs.timestamp
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.01155s] {'action_by': 6, 'target_id': 7, 'target_type': 'ADMIN', 'description': "Created admin user 'string' (id=7)", 'ip_address': '127.0.0.1', 'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36'}
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT audit_logs.id, audit_logs.action_by, audit_logs.target_id, audit_logs.target_type, audit_logs.timestamp, audit_logs.description, audit_logs.ip_address, audit_logs.user_agent 
FROM audit_logs 
WHERE audit_logs.id = %(pk_1)s
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00538s] {'pk_1': 4}
2025-05-23 21:01:33 - INFO - LibraryAppLogger - auditlog_service.py:29 - Audit log created successfully by user 6
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.01138s] {'pk_1': 6}
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 652.9s ago] {'param_1': 6}
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00722s] {'pk_1': 7}
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 652.9s ago] {'param_1': 7}
2025-05-23 21:01:33 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:01:43 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 288s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 663.2s ago] {'param_1': 6}
2025-05-23 21:01:43 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:01:43 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:01:43 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.01759s] {}
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 663.3s ago] {'param_1': 5}
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 663.3s ago] {'param_1': 6}
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 663.3s ago] {'param_1': 7}
2025-05-23 21:01:43 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:01:59 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:01:59 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:01:59 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:01:59 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 304s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:01:59 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:02:00 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 679.8s ago] {'param_1': 6}
2025-05-23 21:02:00 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:02:00 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:02:01 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:02:01 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.is_admin = true
2025-05-23 21:02:01 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.07430s] {}
2025-05-23 21:02:01 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:02:01 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 681s ago] {'param_1': 6}
2025-05-23 21:02:01 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:02:01 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 681.1s ago] {'param_1': 7}
2025-05-23 21:02:01 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:02:11 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:02:11 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:02:11 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:02:11 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 315.9s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:02:11 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:02:11 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 691.1s ago] {'param_1': 6}
2025-05-23 21:02:11 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:02:11 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:02:11 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:02:11 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.is_admin = false
2025-05-23 21:02:11 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.07203s] {}
2025-05-23 21:02:11 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:02:11 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 691.3s ago] {'param_1': 5}
2025-05-23 21:02:11 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:02:30 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:02:30 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:02:30 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:02:30 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 335.4s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:02:30 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:02:30 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 710.7s ago] {'param_1': 6}
2025-05-23 21:02:30 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:02:30 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:02:31 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:02:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = true 
 LIMIT %(param_1)s
2025-05-23 21:02:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.02381s] {'id_1': 6, 'param_1': 1}
2025-05-23 21:02:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:02:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 710.9s ago] {'param_1': 6}
2025-05-23 21:02:31 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:03:12 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:03:12 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:03:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:03:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 377.4s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:03:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:03:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 752.6s ago] {'param_1': 6}
2025-05-23 21:03:12 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:03:12 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:03:12 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:03:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = true 
 LIMIT %(param_1)s
2025-05-23 21:03:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 41.93s ago] {'id_1': 7, 'param_1': 1}
2025-05-23 21:03:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:03:13 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 752.7s ago] {'param_1': 7}
2025-05-23 21:03:14 - INFO - sqlalchemy.engine.Engine - base.py:1843 - UPDATE users SET fullname=%(fullname)s, password=%(password)s, is_active=%(is_active)s, updated_at=now() WHERE users.id = %(id_1)s
2025-05-23 21:03:14 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00946s] {'fullname': 'Tarique', 'password': '$2b$12$v4Ay5yITZ/v84B9Cdmqj3.QgZ6uyIcaYIxJJti/qVmgngu52lcKqq', 'is_active': True, 'id_1': 7}
2025-05-23 21:03:14 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 21:03:14 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:03:14 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s 
 LIMIT %(param_1)s
2025-05-23 21:03:14 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.01246s] {'id_1': 7, 'param_1': 1}
2025-05-23 21:03:14 - INFO - sqlalchemy.engine.Engine - base.py:1843 - INSERT INTO audit_logs (action_by, target_id, target_type, description, ip_address, user_agent) VALUES (%(action_by)s, %(target_id)s, %(target_type)s, %(description)s, %(ip_address)s, %(user_agent)s) RETURNING audit_logs.id, audit_logs.timestamp
2025-05-23 21:03:14 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 101.9s ago] {'action_by': 6, 'target_id': 7, 'target_type': 'ADMIN', 'description': "Updated admin user 'Tarique' (id=7)", 'ip_address': '127.0.0.1', 'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36'}
2025-05-23 21:03:15 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 21:03:15 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:03:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT audit_logs.id, audit_logs.action_by, audit_logs.target_id, audit_logs.target_type, audit_logs.timestamp, audit_logs.description, audit_logs.ip_address, audit_logs.user_agent 
FROM audit_logs 
WHERE audit_logs.id = %(pk_1)s
2025-05-23 21:03:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 101.9s ago] {'pk_1': 5}
2025-05-23 21:03:15 - INFO - LibraryAppLogger - auditlog_service.py:29 - Audit log created successfully by user 6
2025-05-23 21:03:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:03:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 101.9s ago] {'pk_1': 6}
2025-05-23 21:03:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:03:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 754.8s ago] {'param_1': 6}
2025-05-23 21:03:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:03:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 102s ago] {'pk_1': 7}
2025-05-23 21:03:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:03:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 754.9s ago] {'param_1': 7}
2025-05-23 21:03:15 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:03:34 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:03:34 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:03:34 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:03:35 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 399.8s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:03:35 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:03:35 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 775s ago] {'param_1': 6}
2025-05-23 21:03:35 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:03:35 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:03:35 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:03:35 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:03:41 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:03:41 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:03:41 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:03:41 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 406.6s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:03:41 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:03:41 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 781.7s ago] {'param_1': 6}
2025-05-23 21:03:41 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:03:41 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:03:42 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:03:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = true 
 LIMIT %(param_1)s
2025-05-23 21:03:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 71.06s ago] {'id_1': 7, 'param_1': 1}
2025-05-23 21:03:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:03:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 781.9s ago] {'param_1': 7}
2025-05-23 21:03:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - UPDATE users SET fullname=%(fullname)s, password=%(password)s, is_active=%(is_active)s, updated_at=now() WHERE users.id = %(id_1)s
2025-05-23 21:03:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 28.96s ago] {'fullname': 'User', 'password': '$2b$12$pq1.aqQfZVZjAp7U5j9XoOoLh6SMbgpoovi3ojAOIl8CAeXufOl6O', 'is_active': True, 'id_1': 7}
2025-05-23 21:03:43 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 21:03:43 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:03:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s 
 LIMIT %(param_1)s
2025-05-23 21:03:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 28.91s ago] {'id_1': 7, 'param_1': 1}
2025-05-23 21:03:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - INSERT INTO audit_logs (action_by, target_id, target_type, description, ip_address, user_agent) VALUES (%(action_by)s, %(target_id)s, %(target_type)s, %(description)s, %(ip_address)s, %(user_agent)s) RETURNING audit_logs.id, audit_logs.timestamp
2025-05-23 21:03:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 130.8s ago] {'action_by': 6, 'target_id': 7, 'target_type': 'ADMIN', 'description': "Updated admin user 'User' (id=7)", 'ip_address': '127.0.0.1', 'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36'}
2025-05-23 21:03:43 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 21:03:43 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:03:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT audit_logs.id, audit_logs.action_by, audit_logs.target_id, audit_logs.target_type, audit_logs.timestamp, audit_logs.description, audit_logs.ip_address, audit_logs.user_agent 
FROM audit_logs 
WHERE audit_logs.id = %(pk_1)s
2025-05-23 21:03:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 130.9s ago] {'pk_1': 6}
2025-05-23 21:03:43 - INFO - LibraryAppLogger - auditlog_service.py:29 - Audit log created successfully by user 6
2025-05-23 21:03:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:03:44 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 130.9s ago] {'pk_1': 6}
2025-05-23 21:03:44 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:03:44 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 783.8s ago] {'param_1': 6}
2025-05-23 21:03:44 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:03:44 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 131s ago] {'pk_1': 7}
2025-05-23 21:03:44 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:03:44 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 783.9s ago] {'param_1': 7}
2025-05-23 21:03:44 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:03:56 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:03:56 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:03:56 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:03:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 421.8s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:03:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:03:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 797.1s ago] {'param_1': 6}
2025-05-23 21:03:57 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:03:57 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:03:57 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:03:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = true 
 LIMIT %(param_1)s
2025-05-23 21:03:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 86.67s ago] {'id_1': 7, 'param_1': 1}
2025-05-23 21:03:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:03:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 797.7s ago] {'param_1': 7}
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - DELETE FROM users WHERE users.id = %(id_1)s AND users.is_admin = true
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.03188s] {'id_1': 7}
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 21:03:58 - INFO - LibraryAppLogger - user_service.py:98 - Admin 'User' deleted successfully
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - INSERT INTO audit_logs (action_by, target_id, target_type, description, ip_address, user_agent) VALUES (%(action_by)s, %(target_id)s, %(target_type)s, %(description)s, %(ip_address)s, %(user_agent)s) RETURNING audit_logs.id, audit_logs.timestamp
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 145.1s ago] {'action_by': 6, 'target_id': 7, 'target_type': 'ADMIN', 'description': "Deleted admin user 'User' (id=7)", 'ip_address': '127.0.0.1', 'user_agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/131.0.0.0 Safari/537.36'}
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT audit_logs.id, audit_logs.action_by, audit_logs.target_id, audit_logs.target_type, audit_logs.timestamp, audit_logs.description, audit_logs.ip_address, audit_logs.user_agent 
FROM audit_logs 
WHERE audit_logs.id = %(pk_1)s
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 145.2s ago] {'pk_1': 7}
2025-05-23 21:03:58 - INFO - LibraryAppLogger - auditlog_service.py:29 - Audit log created successfully by user 6
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 145.4s ago] {'pk_1': 6}
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 798.3s ago] {'param_1': 6}
2025-05-23 21:03:58 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:04:12 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:04:12 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:04:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:04:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 436.8s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:04:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:04:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 811.9s ago] {'param_1': 6}
2025-05-23 21:04:12 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:04:12 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:04:12 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:04:12 - INFO - LibraryAppLogger - user_service.py:187 - Attempting to assign role_id=0 to user_id=1
2025-05-23 21:04:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s 
 LIMIT %(param_1)s
2025-05-23 21:04:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 57.44s ago] {'id_1': 1, 'param_1': 1}
2025-05-23 21:04:12 - WARNING - LibraryAppLogger - user_service.py:191 - User with id=1 not found
2025-05-23 21:04:12 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:04:18 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:04:18 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:04:18 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:04:18 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 443.6s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:04:19 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:04:19 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 819s ago] {'param_1': 6}
2025-05-23 21:04:19 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:04:19 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:04:19 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:04:19 - INFO - LibraryAppLogger - user_service.py:187 - Attempting to assign role_id=0 to user_id=6
2025-05-23 21:04:19 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s 
 LIMIT %(param_1)s
2025-05-23 21:04:20 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 65.21s ago] {'id_1': 6, 'param_1': 1}
2025-05-23 21:04:20 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:04:20 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 820s ago] {'param_1': 6}
2025-05-23 21:04:20 - WARNING - LibraryAppLogger - user_service.py:195 - Cannot assign role to SUPER_ADMIN user_id=6
2025-05-23 21:04:20 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:04:37 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:04:37 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:04:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:04:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 462.1s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:04:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:04:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 837.2s ago] {'param_1': 6}
2025-05-23 21:04:37 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:04:37 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:04:37 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:04:37 - INFO - LibraryAppLogger - user_service.py:245 - Attempting to remove role_id=0 from user_id=6
2025-05-23 21:04:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s 
 LIMIT %(param_1)s
2025-05-23 21:04:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 82.78s ago] {'id_1': 6, 'param_1': 1}
2025-05-23 21:04:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:04:38 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 837.7s ago] {'param_1': 6}
2025-05-23 21:04:38 - WARNING - LibraryAppLogger - user_service.py:253 - Attempt to remove roles from SUPER_ADMIN user_id=6
2025-05-23 21:04:38 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:05:30 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:05:30 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:05:30 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:05:30 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 515.6s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:05:30 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:05:30 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 890.7s ago] {'param_1': 6}
2025-05-23 21:05:31 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:05:31 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:05:31 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:05:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT audit_logs.id AS audit_logs_id, audit_logs.action_by AS audit_logs_action_by, audit_logs.target_id AS audit_logs_target_id, audit_logs.target_type AS audit_logs_target_type, audit_logs.timestamp AS audit_logs_timestamp, audit_logs.description AS audit_logs_description, audit_logs.ip_address AS audit_logs_ip_address, audit_logs.user_agent AS audit_logs_user_agent 
FROM audit_logs
2025-05-23 21:05:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.05915s] {}
2025-05-23 21:05:31 - INFO - LibraryAppLogger - auditlog_service.py:45 - Fetched all audit logs successfully.
2025-05-23 21:05:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:05:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 238.2s ago] {'pk_1': 6}
2025-05-23 21:05:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:05:31 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 891.2s ago] {'param_1': 6}
2025-05-23 21:05:31 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:05:48 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:05:48 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:05:48 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:05:48 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 533.6s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:05:48 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:05:49 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 908.7s ago] {'param_1': 6}
2025-05-23 21:05:49 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:05:49 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:05:49 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:05:49 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT audit_logs.id AS audit_logs_id, audit_logs.action_by AS audit_logs_action_by, audit_logs.target_id AS audit_logs_target_id, audit_logs.target_type AS audit_logs_target_type, audit_logs.timestamp AS audit_logs_timestamp, audit_logs.description AS audit_logs_description, audit_logs.ip_address AS audit_logs_ip_address, audit_logs.user_agent AS audit_logs_user_agent 
FROM audit_logs 
WHERE audit_logs.id = %(id_1)s 
 LIMIT %(param_1)s
2025-05-23 21:05:49 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.05667s] {'id_1': 1, 'param_1': 1}
2025-05-23 21:05:49 - WARNING - LibraryAppLogger - auditlog_service.py:64 - Audit log with ID 1 not found.
2025-05-23 21:05:49 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:05:56 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:05:56 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:05:56 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:05:56 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 541.4s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:05:56 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:05:56 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 916.6s ago] {'param_1': 6}
2025-05-23 21:05:56 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:05:56 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:05:56 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:05:56 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT audit_logs.id AS audit_logs_id, audit_logs.action_by AS audit_logs_action_by, audit_logs.target_id AS audit_logs_target_id, audit_logs.target_type AS audit_logs_target_type, audit_logs.timestamp AS audit_logs_timestamp, audit_logs.description AS audit_logs_description, audit_logs.ip_address AS audit_logs_ip_address, audit_logs.user_agent AS audit_logs_user_agent 
FROM audit_logs 
WHERE audit_logs.id = %(id_1)s 
 LIMIT %(param_1)s
2025-05-23 21:05:56 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 7.733s ago] {'id_1': 8, 'param_1': 1}
2025-05-23 21:05:56 - WARNING - LibraryAppLogger - auditlog_service.py:64 - Audit log with ID 8 not found.
2025-05-23 21:05:56 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:06:07 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:06:07 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:06:07 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:06:07 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 552.4s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:06:07 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:06:07 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 927.6s ago] {'param_1': 6}
2025-05-23 21:06:07 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:06:07 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:06:07 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:06:07 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT audit_logs.id AS audit_logs_id, audit_logs.action_by AS audit_logs_action_by, audit_logs.target_id AS audit_logs_target_id, audit_logs.target_type AS audit_logs_target_type, audit_logs.timestamp AS audit_logs_timestamp, audit_logs.description AS audit_logs_description, audit_logs.ip_address AS audit_logs_ip_address, audit_logs.user_agent AS audit_logs_user_agent 
FROM audit_logs 
WHERE audit_logs.id = %(id_1)s 
 LIMIT %(param_1)s
2025-05-23 21:06:07 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 18.63s ago] {'id_1': 6, 'param_1': 1}
2025-05-23 21:06:07 - INFO - LibraryAppLogger - auditlog_service.py:70 - Audit log with ID 6 fetched successfully.
2025-05-23 21:06:07 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:06:07 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 274.8s ago] {'pk_1': 6}
2025-05-23 21:06:07 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:06:07 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 927.6s ago] {'param_1': 6}
2025-05-23 21:06:07 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:06:23 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:06:23 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:06:23 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:06:23 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 568.3s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:06:23 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:06:23 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 943.4s ago] {'param_1': 6}
2025-05-23 21:06:23 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:06:23 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:06:23 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:06:23 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT audit_logs.id AS audit_logs_id, audit_logs.action_by AS audit_logs_action_by, audit_logs.target_id AS audit_logs_target_id, audit_logs.target_type AS audit_logs_target_type, audit_logs.timestamp AS audit_logs_timestamp, audit_logs.description AS audit_logs_description, audit_logs.ip_address AS audit_logs_ip_address, audit_logs.user_agent AS audit_logs_user_agent 
FROM audit_logs 
WHERE audit_logs.id = %(id_1)s 
 LIMIT %(param_1)s
2025-05-23 21:06:23 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 34.42s ago] {'id_1': 7, 'param_1': 1}
2025-05-23 21:06:23 - INFO - LibraryAppLogger - auditlog_service.py:70 - Audit log with ID 7 fetched successfully.
2025-05-23 21:06:23 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:06:23 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 290.5s ago] {'pk_1': 6}
2025-05-23 21:06:23 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:06:23 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 943.4s ago] {'param_1': 6}
2025-05-23 21:06:23 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:06:34 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:06:34 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:06:34 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:06:34 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 579.3s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:06:34 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:06:34 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 954.3s ago] {'param_1': 6}
2025-05-23 21:06:34 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:06:34 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:06:34 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:06:34 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT audit_logs.id AS audit_logs_id, audit_logs.action_by AS audit_logs_action_by, audit_logs.target_id AS audit_logs_target_id, audit_logs.target_type AS audit_logs_target_type, audit_logs.timestamp AS audit_logs_timestamp, audit_logs.description AS audit_logs_description, audit_logs.ip_address AS audit_logs_ip_address, audit_logs.user_agent AS audit_logs_user_agent 
FROM audit_logs 
WHERE audit_logs.action_by = %(action_by_1)s
2025-05-23 21:06:34 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.01108s] {'action_by_1': 6}
2025-05-23 21:06:34 - INFO - LibraryAppLogger - auditlog_service.py:87 - Audit logs for admin user 6 fetched successfully.
2025-05-23 21:06:34 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:06:34 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 301.5s ago] {'pk_1': 6}
2025-05-23 21:06:34 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:06:34 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 954.4s ago] {'param_1': 6}
2025-05-23 21:06:34 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:06:49 - WARNING - LibraryAppLogger - auth_dep.py:20 - Attempt to access restricted route while already logged in
2025-05-23 21:18:41 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:18:41 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 21:18:41 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:18:42 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:18:42 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:18:42 - INFO - uvicorn.error - server.py:93 - Finished server process [12424]
2025-05-23 21:18:54 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:18:54 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 21:19:02 - INFO - uvicorn.error - server.py:83 - Started server process [15748]
2025-05-23 21:19:03 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:19:03 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:19:03 - ERROR - uvicorn.error - on.py:134 - Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 664, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 699, in lifespan
    await receive()
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-05-23 21:19:05 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:19:19 - INFO - uvicorn.error - server.py:83 - Started server process [17800]
2025-05-23 21:19:19 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:19:19 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:19:32 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:19:32 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\routes\admin\user_routes.py'. Reloading...
2025-05-23 21:19:32 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:19:32 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:19:32 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:19:32 - INFO - uvicorn.error - server.py:93 - Finished server process [17800]
2025-05-23 21:19:35 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:19:36 - INFO - uvicorn.error - server.py:83 - Started server process [9132]
2025-05-23 21:19:36 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:19:36 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:19:47 - WARNING - LibraryAppLogger - token.py:31 - Authorization header missing or incorrectly formatted
2025-05-23 21:19:47 - ERROR - LibraryAppLogger - token.py:38 - Token not found in request
2025-05-23 21:19:47 - ERROR - LibraryAppLogger - token.py:39 - NoneType: None

2025-05-23 21:20:17 - WARNING - LibraryAppLogger - token.py:31 - Authorization header missing or incorrectly formatted
2025-05-23 21:20:19 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:20:19 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:20:19 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:20:19 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:20:19 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:20:19 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:20:19 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:20:19 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s AND users.is_admin = true 
 LIMIT %(param_1)s
2025-05-23 21:20:19 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.03236s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:20:19 - WARNING - passlib.handlers.bcrypt - bcrypt.py:622 - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-05-23 21:20:21 - INFO - LibraryAppLogger - auth_service.py:26 - Admin 'ammar@gmail.com' authenticated successfully
2025-05-23 21:20:21 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:20:21 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.07978s] {'param_1': 6}
2025-05-23 21:20:21 - INFO - sqlalchemy.engine.Engine - base.py:1843 - UPDATE users SET last_login=%(last_login)s, updated_at=now() WHERE users.id = %(users_id)s
2025-05-23 21:20:21 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.02424s] {'last_login': datetime.datetime(2025, 5, 23, 15, 50, 21, 896055), 'users_id': 6}
2025-05-23 21:20:21 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 21:20:22 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:20:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id, users.fullname, users.email, users.password, users.is_admin, users.is_active, users.profile_image, users.auth_provider, users.provider_id, users.last_login, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:20:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.04343s] {'pk_1': 6}
2025-05-23 21:20:22 - INFO - LibraryAppLogger - token.py:20 - Token generated for user: ammar@gmail.com
2025-05-23 21:20:22 - INFO - LibraryAppLogger - auth_service.py:83 - User 'ammar@gmail.com' logged in successfully
2025-05-23 21:20:22 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:21:03 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:21:03 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:21:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:21:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.06987s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:21:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:21:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 42.24s ago] {'param_1': 6}
2025-05-23 21:21:03 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:21:03 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:21:04 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:21:04 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s 
 LIMIT %(param_1)s
2025-05-23 21:21:04 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.07469s] {'id_1': 6, 'param_1': 1}
2025-05-23 21:21:04 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:21:04 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 42.57s ago] {'param_1': 6}
2025-05-23 21:21:04 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:21:10 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:21:10 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:21:10 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:21:10 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 6.818s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:21:10 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:21:10 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 49.04s ago] {'param_1': 6}
2025-05-23 21:21:10 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:21:10 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:21:10 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:21:10 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = true 
 LIMIT %(param_1)s
2025-05-23 21:21:10 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.06542s] {'id_1': 6, 'param_1': 1}
2025-05-23 21:21:10 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:21:10 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 49.3s ago] {'param_1': 6}
2025-05-23 21:21:10 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:21:15 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:21:15 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:21:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:21:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 11.78s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:21:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:21:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 53.93s ago] {'param_1': 6}
2025-05-23 21:21:15 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:21:15 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:21:15 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:21:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:21:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.05140s] {'id_1': 6, 'param_1': 1}
2025-05-23 21:21:15 - ERROR - LibraryAppLogger - user_service.py:132 - Unexpected error while fetching specific admin: HTTPException.__init__() got an unexpected keyword argument 'status'
2025-05-23 21:21:15 - ERROR - LibraryAppLogger - user_service.py:133 - Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\app\services\admin\user_service.py", line 123, in get_specific_user
    raise HTTPException(
          ^^^^^^^^^^^^^^
TypeError: HTTPException.__init__() got an unexpected keyword argument 'status'

2025-05-23 21:21:15 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:22:35 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:22:35 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 21:22:35 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:22:35 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:22:36 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:22:36 - INFO - uvicorn.error - server.py:93 - Finished server process [9132]
2025-05-23 21:22:42 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:22:44 - INFO - uvicorn.error - server.py:83 - Started server process [12892]
2025-05-23 21:22:44 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:22:45 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:23:16 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:23:16 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 21:23:16 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:23:16 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:23:16 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:23:16 - INFO - uvicorn.error - server.py:93 - Finished server process [12892]
2025-05-23 21:23:35 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:23:40 - INFO - uvicorn.error - server.py:83 - Started server process [3032]
2025-05-23 21:23:40 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:23:40 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:23:41 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:23:41 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:23:41 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:23:41 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:23:41 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:23:41 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:23:41 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:23:42 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:23:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:23:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.10753s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:23:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:23:42 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.14633s] {'param_1': 6}
2025-05-23 21:23:42 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:23:42 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:23:42 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:23:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:23:43 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.10137s] {'id_1': 6, 'param_1': 1}
2025-05-23 21:23:43 - ERROR - LibraryAppLogger - user_service.py:132 - Unexpected error while fetching specific user by admin: HTTPException.__init__() got an unexpected keyword argument 'status'
2025-05-23 21:23:43 - ERROR - LibraryAppLogger - user_service.py:133 - Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\app\services\admin\user_service.py", line 123, in get_specific_user
    raise HTTPException(
          ^^^^^^^^^^^^^^
TypeError: HTTPException.__init__() got an unexpected keyword argument 'status'

2025-05-23 21:23:43 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:24:46 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:24:46 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 21:24:46 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:24:46 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:24:46 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:24:46 - INFO - uvicorn.error - server.py:93 - Finished server process [3032]
2025-05-23 21:24:55 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:24:55 - INFO - uvicorn.error - server.py:83 - Started server process [21180]
2025-05-23 21:24:55 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:24:55 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:24:55 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:24:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:24:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:24:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:24:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:24:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:24:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:24:55 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:24:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:24:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00222s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:24:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:24:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00297s] {'param_1': 6}
2025-05-23 21:24:56 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:24:56 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:24:56 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:24:56 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:24:56 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00319s] {'id_1': 6, 'param_1': 1}
2025-05-23 21:24:56 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:25:05 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:25:05 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:25:05 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:25:05 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 10.02s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:25:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:25:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 10.28s ago] {'param_1': 6}
2025-05-23 21:25:06 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:25:06 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:25:06 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:25:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:25:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 10.33s ago] {'id_1': 5, 'param_1': 1}
2025-05-23 21:25:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:25:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 10.41s ago] {'param_1': 5}
2025-05-23 21:25:06 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:25:06 - ERROR - uvicorn.error - httptools_impl.py:414 - Exception in ASGI application
Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\middleware\errors.py", line 187, in __call__
    raise exc
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [User(fullname='Ammar Ansari', email='ammarthedeveloper@gmail.com', is_admin=False, is_active=True, profile_image='https://lh3.googleusercontent.com/a/ACg8ocJX5nIHtYrKsXt5wUNSc8YDa7gUK02HVdGyi9DcufZtTs1VRw=s96-c', auth_provider=<AuthProvider.GOOGLE: 'google'>, provider_id='103512947258213115907', id=5, roles=[], last_login=datetime.datetime(2025, 5, 22, 15, 38, 4, 921111, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), created_at=datetime.datetime(2025, 5, 22, 21, 6, 59, 88986, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), updated_at=datetime.datetime(2025, 5, 22, 21, 8, 4, 918344, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))))]}

2025-05-23 21:25:22 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:25:22 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:25:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:25:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 26.39s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:25:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:25:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 26.38s ago] {'param_1': 6}
2025-05-23 21:25:22 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:25:22 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:25:22 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:25:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:25:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 26.32s ago] {'id_1': 5, 'param_1': 1}
2025-05-23 21:25:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:25:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 26.4s ago] {'param_1': 5}
2025-05-23 21:25:22 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:25:22 - ERROR - uvicorn.error - httptools_impl.py:414 - Exception in ASGI application
Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\uvicorn\protocols\http\httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\uvicorn\middleware\proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\fastapi\applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\middleware\errors.py", line 187, in __call__
    raise exc
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\middleware\errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\middleware\cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\middleware\exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 714, in __call__
    await self.middleware_stack(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 734, in app
    await route.handle(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\fastapi\routing.py", line 327, in app
    content = await serialize_response(
              ^^^^^^^^^^^^^^^^^^^^^^^^^
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\fastapi\routing.py", line 176, in serialize_response
    raise ResponseValidationError(
fastapi.exceptions.ResponseValidationError: 1 validation errors:
  {'type': 'model_attributes_type', 'loc': ('response',), 'msg': 'Input should be a valid dictionary or object to extract fields from', 'input': [User(fullname='Ammar Ansari', email='ammarthedeveloper@gmail.com', is_admin=False, is_active=True, profile_image='https://lh3.googleusercontent.com/a/ACg8ocJX5nIHtYrKsXt5wUNSc8YDa7gUK02HVdGyi9DcufZtTs1VRw=s96-c', auth_provider=<AuthProvider.GOOGLE: 'google'>, provider_id='103512947258213115907', id=5, roles=[], last_login=datetime.datetime(2025, 5, 22, 15, 38, 4, 921111, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), created_at=datetime.datetime(2025, 5, 22, 21, 6, 59, 88986, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))), updated_at=datetime.datetime(2025, 5, 22, 21, 8, 4, 918344, tzinfo=datetime.timezone(datetime.timedelta(seconds=19800))))]}

2025-05-23 21:25:44 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:25:44 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 21:25:44 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:25:44 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:25:44 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:25:44 - INFO - uvicorn.error - server.py:93 - Finished server process [21180]
2025-05-23 21:25:51 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:25:53 - INFO - uvicorn.error - server.py:83 - Started server process [10444]
2025-05-23 21:25:53 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:25:53 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:25:54 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:25:54 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:25:54 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:25:54 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:25:54 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:25:54 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:25:54 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:25:54 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:25:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:25:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.09897s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:25:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:25:55 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.28587s] {'param_1': 6}
2025-05-23 21:25:56 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:25:56 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:25:56 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:25:56 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:25:56 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.08812s] {'id_1': 5, 'param_1': 1}
2025-05-23 21:25:56 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:25:56 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 1.432s ago] {'param_1': 5}
2025-05-23 21:25:56 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:26:22 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:26:22 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\schemas\user.py'. Reloading...
2025-05-23 21:26:22 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:26:22 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:26:22 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:26:22 - INFO - uvicorn.error - server.py:93 - Finished server process [10444]
2025-05-23 21:26:43 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:26:46 - INFO - uvicorn.error - server.py:83 - Started server process [18956]
2025-05-23 21:26:46 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:26:47 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:26:47 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:26:48 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:26:48 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:26:48 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:26:48 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:26:48 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:26:48 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:26:48 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:26:48 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:26:49 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.04323s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:26:49 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:26:49 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00464s] {'param_1': 6}
2025-05-23 21:26:49 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:26:49 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:26:49 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:26:49 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:26:49 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.02729s] {'id_1': 5, 'param_1': 1}
2025-05-23 21:26:49 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:26:49 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 0.3958s ago] {'param_1': 5}
2025-05-23 21:26:49 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:27:00 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:27:00 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\schemas\user.py'. Reloading...
2025-05-23 21:27:02 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:27:02 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:27:02 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:27:02 - INFO - uvicorn.error - server.py:93 - Finished server process [18956]
2025-05-23 21:27:18 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:27:20 - INFO - uvicorn.error - server.py:83 - Started server process [21220]
2025-05-23 21:27:20 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:27:20 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:27:36 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:27:36 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 21:27:36 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:27:36 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:27:36 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:27:36 - INFO - uvicorn.error - server.py:93 - Finished server process [21220]
2025-05-23 21:27:40 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:27:40 - INFO - uvicorn.error - server.py:83 - Started server process [5228]
2025-05-23 21:27:40 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:27:40 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:27:46 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:27:46 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 21:27:46 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:27:46 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:27:46 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:27:46 - INFO - uvicorn.error - server.py:93 - Finished server process [5228]
2025-05-23 21:27:49 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:27:51 - INFO - uvicorn.error - server.py:83 - Started server process [19836]
2025-05-23 21:27:51 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:27:51 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:28:02 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:28:02 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\repositories\user_repo.py'. Reloading...
2025-05-23 21:28:02 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:28:02 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:28:02 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:28:02 - INFO - uvicorn.error - server.py:93 - Finished server process [19836]
2025-05-23 21:28:20 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:28:25 - INFO - uvicorn.error - server.py:83 - Started server process [12740]
2025-05-23 21:28:25 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:28:25 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:28:26 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:28:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:28:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:28:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:28:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:28:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:28:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:28:26 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:28:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:28:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.04076s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:28:27 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:28:27 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.01580s] {'param_1': 6}
2025-05-23 21:28:27 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:28:27 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:28:27 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:28:27 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:28:27 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.02138s] {'id_1': 5, 'param_1': 1}
2025-05-23 21:28:27 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:28:27 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 0.318s ago] {'param_1': 5}
2025-05-23 21:28:27 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:28:53 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:28:53 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\schemas\user.py'. Reloading...
2025-05-23 21:28:53 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:28:53 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:28:53 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:28:53 - INFO - uvicorn.error - server.py:93 - Finished server process [12740]
2025-05-23 21:28:56 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:28:57 - INFO - uvicorn.error - server.py:83 - Started server process [1712]
2025-05-23 21:28:57 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:28:57 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:28:57 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00323s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00213s] {'param_1': 6}
2025-05-23 21:28:58 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:28:58 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:28:58 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00278s] {'id_1': 5, 'param_1': 1}
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 0.07947s ago] {'param_1': 5}
2025-05-23 21:28:58 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:29:06 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:29:06 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:29:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:29:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 7.984s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:29:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:29:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 7.965s ago] {'param_1': 6}
2025-05-23 21:29:06 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:29:06 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:29:06 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:29:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:29:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 7.911s ago] {'id_1': 5, 'param_1': 1}
2025-05-23 21:29:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:29:06 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 7.997s ago] {'param_1': 5}
2025-05-23 21:29:06 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:29:37 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:29:37 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:29:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:29:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 39.81s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:29:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:29:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 39.79s ago] {'param_1': 6}
2025-05-23 21:29:37 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:29:37 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:29:37 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:29:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = true 
 LIMIT %(param_1)s
2025-05-23 21:29:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00516s] {'id_1': 6, 'param_1': 1}
2025-05-23 21:29:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:29:37 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 39.82s ago] {'param_1': 6}
2025-05-23 21:29:37 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:30:10 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:30:10 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\admin\user_service.py'. Reloading...
2025-05-23 21:30:10 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:30:10 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:30:10 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:30:10 - INFO - uvicorn.error - server.py:93 - Finished server process [1712]
2025-05-23 21:30:14 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:30:15 - INFO - uvicorn.error - server.py:83 - Started server process [13676]
2025-05-23 21:30:15 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:30:15 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:30:15 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00250s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00755s] {'param_1': 6}
2025-05-23 21:30:15 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:30:15 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:30:15 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = true 
 LIMIT %(param_1)s
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00498s] {'id_1': 6, 'param_1': 1}
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 0.09348s ago] {'param_1': 6}
2025-05-23 21:30:15 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:30:26 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:30:26 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:30:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:30:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 10.71s ago] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:30:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:30:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 10.68s ago] {'param_1': 6}
2025-05-23 21:30:26 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:30:26 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:30:26 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:30:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:30:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.01124s] {'id_1': 5, 'param_1': 1}
2025-05-23 21:30:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:30:26 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 10.71s ago] {'param_1': 5}
2025-05-23 21:30:26 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:30:52 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:30:52 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\helpers\converters.py'. Reloading...
2025-05-23 21:30:52 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:30:53 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:30:53 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:30:53 - INFO - uvicorn.error - server.py:93 - Finished server process [13676]
2025-05-23 21:30:56 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:30:56 - INFO - uvicorn.error - server.py:83 - Started server process [12300]
2025-05-23 21:30:56 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:30:56 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:30:57 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00260s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00320s] {'param_1': 6}
2025-05-23 21:30:57 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:30:57 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:30:57 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00491s] {'id_1': 5, 'param_1': 1}
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 0.08999s ago] {'param_1': 5}
2025-05-23 21:30:57 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:31:17 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:31:17 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\helpers\converters.py'. Reloading...
2025-05-23 21:31:17 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:31:17 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:31:17 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:31:17 - INFO - uvicorn.error - server.py:93 - Finished server process [12300]
2025-05-23 21:31:21 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:31:22 - INFO - uvicorn.error - server.py:83 - Started server process [21104]
2025-05-23 21:31:22 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:31:22 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:31:22 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00352s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00680s] {'param_1': 6}
2025-05-23 21:31:22 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:31:22 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:31:22 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00397s] {'id_1': 5, 'param_1': 1}
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 0.1021s ago] {'param_1': 5}
2025-05-23 21:31:22 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:31:58 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:31:58 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\models\user.py'. Reloading...
2025-05-23 21:31:58 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:31:58 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:31:58 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:31:58 - INFO - uvicorn.error - server.py:93 - Finished server process [21104]
2025-05-23 21:32:00 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:32:02 - INFO - uvicorn.error - server.py:83 - Started server process [11312]
2025-05-23 21:32:02 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:32:02 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:32:03 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00464s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00761s] {'param_1': 6}
2025-05-23 21:32:03 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:32:03 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:32:03 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00346s] {'id_1': 5, 'param_1': 1}
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 0.1164s ago] {'param_1': 5}
2025-05-23 21:32:03 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:32:21 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:32:21 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\helpers\converters.py'. Reloading...
2025-05-23 21:32:21 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:32:21 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:32:21 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:32:21 - INFO - uvicorn.error - server.py:93 - Finished server process [11312]
2025-05-23 21:32:25 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:32:26 - INFO - uvicorn.error - server.py:83 - Started server process [6824]
2025-05-23 21:32:26 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:32:26 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:32:43 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:32:43 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\schemas\user.py'. Reloading...
2025-05-23 21:32:43 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:32:44 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:32:44 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:32:44 - INFO - uvicorn.error - server.py:93 - Finished server process [6824]
2025-05-23 21:32:46 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:32:48 - INFO - uvicorn.error - server.py:83 - Started server process [6072]
2025-05-23 21:32:48 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:32:48 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:36:17 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:36:17 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\schemas\user.py'. Reloading...
2025-05-23 21:36:17 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:36:17 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:36:17 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:36:17 - INFO - uvicorn.error - server.py:93 - Finished server process [6072]
2025-05-23 21:36:23 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:36:24 - INFO - uvicorn.error - server.py:83 - Started server process [15840]
2025-05-23 21:36:24 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:36:24 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:36:24 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:36:24 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\schemas\user.py'. Reloading...
2025-05-23 21:36:24 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:36:25 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:36:25 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:36:25 - INFO - uvicorn.error - server.py:93 - Finished server process [15840]
2025-05-23 21:36:28 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:36:29 - INFO - uvicorn.error - server.py:83 - Started server process [16620]
2025-05-23 21:36:29 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:36:29 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:36:29 - WARNING - LibraryAppLogger - token.py:54 - Token expired
2025-05-23 21:36:39 - WARNING - LibraryAppLogger - auth_dep.py:26 - JWT decode error: Signature has expired.
2025-05-23 21:36:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:36:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:36:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:36:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:36:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:36:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:36:39 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:36:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s AND users.is_admin = true 
 LIMIT %(param_1)s
2025-05-23 21:36:39 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.07024s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:36:39 - WARNING - passlib.handlers.bcrypt - bcrypt.py:622 - (trapped) error reading bcrypt version
Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\passlib\handlers\bcrypt.py", line 620, in _load_backend_mixin
    version = _bcrypt.__about__.__version__
              ^^^^^^^^^^^^^^^^^
AttributeError: module 'bcrypt' has no attribute '__about__'
2025-05-23 21:36:40 - INFO - LibraryAppLogger - auth_service.py:26 - Admin 'ammar@gmail.com' authenticated successfully
2025-05-23 21:36:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:36:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00270s] {'param_1': 6}
2025-05-23 21:36:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - UPDATE users SET last_login=%(last_login)s, updated_at=now() WHERE users.id = %(users_id)s
2025-05-23 21:36:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00103s] {'last_login': datetime.datetime(2025, 5, 23, 16, 6, 40, 357264), 'users_id': 6}
2025-05-23 21:36:40 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 21:36:40 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:36:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id, users.fullname, users.email, users.password, users.is_admin, users.is_active, users.profile_image, users.auth_provider, users.provider_id, users.last_login, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:36:40 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00947s] {'pk_1': 6}
2025-05-23 21:36:40 - INFO - LibraryAppLogger - token.py:20 - Token generated for user: ammar@gmail.com
2025-05-23 21:36:40 - INFO - LibraryAppLogger - auth_service.py:83 - User 'ammar@gmail.com' logged in successfully
2025-05-23 21:36:40 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:36:52 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:36:52 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:36:52 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:36:52 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00469s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:36:52 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:36:52 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 11.82s ago] {'param_1': 6}
2025-05-23 21:36:52 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:36:52 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:36:52 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:36:52 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:36:52 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00323s] {'id_1': 5, 'param_1': 1}
2025-05-23 21:36:52 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:36:52 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 11.85s ago] {'param_1': 5}
2025-05-23 21:36:52 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:37:13 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:37:13 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\routes\admin\user_routes.py'. Reloading...
2025-05-23 21:37:13 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:37:13 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:37:13 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:37:13 - INFO - uvicorn.error - server.py:93 - Finished server process [16620]
2025-05-23 21:37:18 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:37:18 - INFO - uvicorn.error - server.py:83 - Started server process [13876]
2025-05-23 21:37:18 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:37:18 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:37:19 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:37:19 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\schemas\user.py'. Reloading...
2025-05-23 21:37:19 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:37:20 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:37:20 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:37:20 - INFO - uvicorn.error - server.py:93 - Finished server process [13876]
2025-05-23 21:37:23 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:37:24 - INFO - uvicorn.error - server.py:83 - Started server process [5168]
2025-05-23 21:37:24 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:37:24 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:37:24 - INFO - LibraryAppLogger - token.py:51 - Token verification successful
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00367s] {'email_1': 'ammar@gmail.com', 'param_1': 1}
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00244s] {'param_1': 6}
2025-05-23 21:37:25 - INFO - LibraryAppLogger - auth_dep.py:70 - Authenticated user 'ammar@gmail.com' with roles: ['super_admin']
2025-05-23 21:37:25 - INFO - LibraryAppLogger - auth_dep.py:92 - Admin access granted to user 'ammar@gmail.com'
2025-05-23 21:37:25 - INFO - LibraryAppLogger - auth_dep.py:126 - Admin 'ammar@gmail.com' granted access with role(s): ['super_admin']
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.id = %(id_1)s AND users.is_admin = false 
 LIMIT %(param_1)s
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00367s] {'id_1': 5, 'param_1': 1}
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 0.07699s ago] {'param_1': 5}
2025-05-23 21:37:25 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:38:19 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:38:19 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\routes\user_auth_routes.py'. Reloading...
2025-05-23 21:38:19 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:38:19 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:38:19 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:38:19 - INFO - uvicorn.error - server.py:93 - Finished server process [5168]
2025-05-23 21:38:24 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:38:24 - INFO - uvicorn.error - server.py:83 - Started server process [20588]
2025-05-23 21:38:24 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:38:24 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:39:00 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:39:00 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\schemas\user.py'. Reloading...
2025-05-23 21:39:00 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:39:00 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:39:00 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:39:00 - INFO - uvicorn.error - server.py:93 - Finished server process [20588]
2025-05-23 21:39:03 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:39:04 - INFO - uvicorn.error - server.py:83 - Started server process [18516]
2025-05-23 21:39:04 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:39:04 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:39:37 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:39:37 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\facebook_auth_service.py'. Reloading...
2025-05-23 21:39:37 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:39:37 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:39:37 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:39:37 - INFO - uvicorn.error - server.py:93 - Finished server process [18516]
2025-05-23 21:39:42 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:40:14 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:40:14 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\facebook_auth_service.py'. Reloading...
2025-05-23 21:40:18 - INFO - uvicorn.error - server.py:83 - Started server process [9756]
2025-05-23 21:40:18 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:40:18 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:40:18 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:40:27 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:40:27 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\google_auth_service.py'. Reloading...
2025-05-23 21:40:27 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:40:27 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:40:27 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:40:27 - INFO - uvicorn.error - server.py:93 - Finished server process [9756]
2025-05-23 21:40:30 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:40:30 - INFO - uvicorn.error - server.py:83 - Started server process [7708]
2025-05-23 21:40:30 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:40:30 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:40:47 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:40:47 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\google_auth_service.py'. Reloading...
2025-05-23 21:40:47 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:40:47 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:40:47 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:40:47 - INFO - uvicorn.error - server.py:93 - Finished server process [7708]
2025-05-23 21:40:50 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:40:51 - INFO - uvicorn.error - server.py:83 - Started server process [14948]
2025-05-23 21:40:51 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:40:51 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:42:54 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:42:54 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\google_auth_service.py'. Reloading...
2025-05-23 21:42:54 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:42:54 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:42:54 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:42:54 - INFO - uvicorn.error - server.py:93 - Finished server process [14948]
2025-05-23 21:42:57 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:42:58 - INFO - uvicorn.error - server.py:83 - Started server process [16116]
2025-05-23 21:42:58 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:42:58 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:43:10 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:43:10 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\facebook_auth_service.py'. Reloading...
2025-05-23 21:43:10 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:43:10 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:43:10 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:43:10 - INFO - uvicorn.error - server.py:93 - Finished server process [16116]
2025-05-23 21:43:15 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:43:15 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\facebook_auth_service.py'. Reloading...
2025-05-23 21:43:15 - INFO - uvicorn.error - server.py:83 - Started server process [1712]
2025-05-23 21:43:15 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:43:15 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:43:15 - ERROR - uvicorn.error - on.py:134 - Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\base_events.py", line 664, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
asyncio.exceptions.CancelledError

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 194, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\runners.py", line 123, in run
    raise KeyboardInterrupt()
KeyboardInterrupt

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\starlette\routing.py", line 699, in lifespan
    await receive()
  File "D:\projects\Library Management Project\server\venv\Lib\site-packages\uvicorn\lifespan\on.py", line 137, in receive
    return await self.receive_queue.get()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\TSIS\AppData\Local\Programs\Python\Python312\Lib\asyncio\queues.py", line 158, in get
    await getter
asyncio.exceptions.CancelledError

2025-05-23 21:43:16 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:43:20 - INFO - uvicorn.error - server.py:83 - Started server process [20164]
2025-05-23 21:43:20 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:43:20 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:43:25 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:43:25 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\services\users\facebook_auth_service.py'. Reloading...
2025-05-23 21:43:25 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:43:25 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:43:25 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:43:25 - INFO - uvicorn.error - server.py:93 - Finished server process [20164]
2025-05-23 21:43:29 - INFO - uvicorn.error - server.py:83 - Started server process [21180]
2025-05-23 21:43:29 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:43:29 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:43:29 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:44:24 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:44:24 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\routes\user_auth_routes.py'. Reloading...
2025-05-23 21:44:24 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:44:24 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:44:24 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:44:24 - INFO - uvicorn.error - server.py:93 - Finished server process [21180]
2025-05-23 21:44:26 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:44:27 - INFO - uvicorn.error - server.py:83 - Started server process [20444]
2025-05-23 21:44:27 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:44:27 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:44:51 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:44:51 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\routes\user_auth_routes.py'. Reloading...
2025-05-23 21:44:51 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:44:51 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:44:51 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:44:51 - INFO - uvicorn.error - server.py:93 - Finished server process [20444]
2025-05-23 21:44:55 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:44:56 - INFO - uvicorn.error - server.py:83 - Started server process [15048]
2025-05-23 21:44:56 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:44:56 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:45:45 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:45:45 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\routes\user_auth_routes.py'. Reloading...
2025-05-23 21:45:45 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:45:45 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:45:45 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:45:45 - INFO - uvicorn.error - server.py:93 - Finished server process [15048]
2025-05-23 21:45:49 - INFO - watchfiles.main - main.py:308 - 5 changes detected
2025-05-23 21:45:50 - INFO - uvicorn.error - server.py:83 - Started server process [13044]
2025-05-23 21:45:50 - INFO - uvicorn.error - on.py:48 - Waiting for application startup.
2025-05-23 21:45:50 - INFO - uvicorn.error - on.py:62 - Application startup complete.
2025-05-23 21:46:12 - WARNING - LibraryAppLogger - token.py:31 - Authorization header missing or incorrectly formatted
2025-05-23 21:46:12 - INFO - LibraryAppLogger - google_auth_service.py:19 - Starting Google login flow
2025-05-23 21:46:12 - INFO - LibraryAppLogger - google_auth_service.py:26 - Google ID token verified successfully
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select pg_catalog.version()
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - select current_schema()
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - show standard_conforming_strings
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [raw sql] {}
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.03524s] {'email_1': 'ansariammar3271@gmail.com', 'param_1': 1}
2025-05-23 21:46:12 - INFO - LibraryAppLogger - google_auth_service.py:58 - New user. Creating non-admin user for ansariammar3271@gmail.com
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - INSERT INTO users (fullname, email, password, is_admin, is_active, profile_image, auth_provider, provider_id, last_login) VALUES (%(fullname)s, %(email)s, %(password)s, %(is_admin)s, %(is_active)s, %(profile_image)s, %(auth_provider)s, %(provider_id)s, %(last_login)s) RETURNING users.id, users.created_at, users.updated_at
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.02363s] {'fullname': 'Ansari Ammar', 'email': 'ansariammar3271@gmail.com', 'password': None, 'is_admin': False, 'is_active': True, 'profile_image': 'https://lh3.googleusercontent.com/a/ACg8ocIEdPudgs86j14B0rcc57fT1yhMT4I5iyFsK8uuHLNvfSt0J4ae=s96-c', 'auth_provider': 'GOOGLE', 'provider_id': '110907205265014922949', 'last_login': None}
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id, users.fullname, users.email, users.password, users.is_admin, users.is_active, users.profile_image, users.auth_provider, users.provider_id, users.last_login, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00223s] {'pk_1': 8}
2025-05-23 21:46:12 - INFO - LibraryAppLogger - google_auth_service.py:67 - User created successfully for ansariammar3271@gmail.com
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00148s] {'param_1': 8}
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - UPDATE users SET last_login=%(last_login)s, updated_at=now() WHERE users.id = %(users_id)s
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [generated in 0.00144s] {'last_login': datetime.datetime(2025, 5, 23, 16, 16, 12, 808315), 'users_id': 8}
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id, users.fullname, users.email, users.password, users.is_admin, users.is_active, users.profile_image, users.auth_provider, users.provider_id, users.last_login, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 0.09653s ago] {'pk_1': 8}
2025-05-23 21:46:12 - INFO - LibraryAppLogger - google_auth_service.py:74 - Updated last login for user ansariammar3271@gmail.com
2025-05-23 21:46:12 - INFO - LibraryAppLogger - token.py:20 - Token generated for user: ansariammar3271@gmail.com
2025-05-23 21:46:12 - INFO - LibraryAppLogger - google_auth_service.py:77 - User 'ansariammar3271@gmail.com' logged in successfully using Google login
2025-05-23 21:46:12 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:48:16 - WARNING - LibraryAppLogger - token.py:31 - Authorization header missing or incorrectly formatted
2025-05-23 21:48:16 - INFO - LibraryAppLogger - facebook_auth_service.py:17 - Verifying Facebook access token
2025-05-23 21:48:16 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:48:16 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id AS users_id, users.fullname AS users_fullname, users.email AS users_email, users.password AS users_password, users.is_admin AS users_is_admin, users.is_active AS users_is_active, users.profile_image AS users_profile_image, users.auth_provider AS users_auth_provider, users.provider_id AS users_provider_id, users.last_login AS users_last_login, users.created_at AS users_created_at, users.updated_at AS users_updated_at 
FROM users 
WHERE users.email = %(email_1)s 
 LIMIT %(param_1)s
2025-05-23 21:48:16 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 124.1s ago] {'email_1': 'ammarthedeveloper@gmail.com', 'param_1': 1}
2025-05-23 21:48:16 - INFO - sqlalchemy.engine.Engine - base.py:1843 - UPDATE users SET last_login=%(last_login)s, updated_at=now() WHERE users.id = %(users_id)s
2025-05-23 21:48:16 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 123.9s ago] {'last_login': datetime.datetime(2025, 5, 23, 16, 18, 16, 712414), 'users_id': 5}
2025-05-23 21:48:16 - INFO - sqlalchemy.engine.Engine - base.py:2705 - COMMIT
2025-05-23 21:48:16 - INFO - sqlalchemy.engine.Engine - base.py:2699 - BEGIN (implicit)
2025-05-23 21:48:16 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT users.id, users.fullname, users.email, users.password, users.is_admin, users.is_active, users.profile_image, users.auth_provider, users.provider_id, users.last_login, users.created_at, users.updated_at 
FROM users 
WHERE users.id = %(pk_1)s
2025-05-23 21:48:16 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 124s ago] {'pk_1': 5}
2025-05-23 21:48:16 - INFO - sqlalchemy.engine.Engine - base.py:1843 - SELECT roles.id AS roles_id, roles.name AS roles_name, roles.description AS roles_description 
FROM roles, user_roles 
WHERE %(param_1)s = user_roles.user_id AND roles.id = user_roles.role_id
2025-05-23 21:48:16 - INFO - sqlalchemy.engine.Engine - base.py:1843 - [cached since 123.9s ago] {'param_1': 5}
2025-05-23 21:48:16 - INFO - LibraryAppLogger - token.py:20 - Token generated for user: ammarthedeveloper@gmail.com
2025-05-23 21:48:16 - INFO - LibraryAppLogger - facebook_auth_service.py:56 - Facebook login successful for user ammarthedeveloper@gmail.com
2025-05-23 21:48:16 - INFO - sqlalchemy.engine.Engine - base.py:2702 - ROLLBACK
2025-05-23 21:50:37 - INFO - uvicorn.error - server.py:263 - Shutting down
2025-05-23 21:50:37 - INFO - uvicorn.error - on.py:67 - Waiting for application shutdown.
2025-05-23 21:50:37 - INFO - uvicorn.error - on.py:76 - Application shutdown complete.
2025-05-23 21:50:37 - INFO - uvicorn.error - server.py:93 - Finished server process [13044]
2025-05-23 21:52:32 - INFO - watchfiles.main - main.py:308 - 1 change detected
2025-05-23 21:52:32 - WARNING - uvicorn.error - basereload.py:55 - WatchFiles detected changes in 'app\routes\user_auth_routes.py'. Reloading...
